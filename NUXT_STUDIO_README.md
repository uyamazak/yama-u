# Nuxt Studio Setup

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«Nuxt StudioãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§Markdownãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã§ãã‚‹ç’°å¢ƒãŒæ•´ã„ã¾ã—ãŸã€‚

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

- `nuxt@^4.3.1` - Nuxt 3ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- `@nuxt/content@^3.11.2` - Nuxt Content ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«  
- `@nuxthq/studio@^2.2.1` - Nuxt Studio ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼
- `better-sqlite3` - Nuxt ContentãŒå¿…è¦ã¨ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®Markdownãƒ•ã‚¡ã‚¤ãƒ«ã¯ `src/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä¿å­˜ã•ã‚Œã¦ãŠã‚Šã€Nuxt Contentã‹ã‚‰ã¯ `content` ã¨ã„ã†åå‰ã®ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã‚’é€šã˜ã¦ã‚¢ã‚¯ã‚»ã‚¹ã•ã‚Œã¾ã™ã€‚

```
yama-u/
â”œâ”€â”€ src/                    # Markdownã‚³ãƒ³ãƒ†ãƒ³ãƒ„ (VitePressç”¨)
â”‚   â”œâ”€â”€ poem/              # ãƒã‚¨ãƒ ã‚«ãƒ†ã‚´ãƒª
â”‚   â”œâ”€â”€ anime/             # ã‚¢ãƒ‹ãƒ¡ã‚«ãƒ†ã‚´ãƒª
â”‚   â””â”€â”€ takibi/            # ç„šãç«ã‚«ãƒ†ã‚´ãƒª
â”œâ”€â”€ content -> src         # srcã¸ã®ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ (Nuxt Contentç”¨)
â”œâ”€â”€ pages/                 # Nuxt ãƒšãƒ¼ã‚¸
â”‚   â”œâ”€â”€ index.vue         # ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸
â”‚   â””â”€â”€ [...slug].vue     # å‹•çš„ãƒ«ãƒ¼ãƒˆï¼ˆè¨˜äº‹ãƒšãƒ¼ã‚¸ï¼‰
â”œâ”€â”€ nuxt.config.ts        # Nuxt è¨­å®š
â”œâ”€â”€ content.config.ts     # Nuxt Content è¨­å®š
â””â”€â”€ app.vue               # Nuxt ã‚¢ãƒ—ãƒªã®ãƒ«ãƒ¼ãƒˆ
```

## ä½¿ã„æ–¹

### Nuxt Studio ã®èµ·å‹•

```bash
npm run studio:dev
```

ã“ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€Nuxt Studioã®é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¾ã™ã€‚é€šå¸¸ã¯ http://localhost:3000 ã§èµ·å‹•ã—ã¾ã™ãŒã€ãƒãƒ¼ãƒˆãŒä½¿ç”¨ä¸­ã®å ´åˆã¯è‡ªå‹•çš„ã«æ¬¡ã«åˆ©ç”¨å¯èƒ½ãªãƒãƒ¼ãƒˆï¼ˆä¾‹: http://localhost:3001ï¼‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

èµ·å‹•æ™‚ã®ãƒ­ã‚°ã§å®Ÿéš›ã®URLã‚’ç¢ºèªã—ã¦ãã ã•ã„:
```
âœ Local:    http://localhost:3001/
```

### ãƒ“ãƒ«ãƒ‰ã¨ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼

```bash
# Nuxt Studioã‚’ãƒ“ãƒ«ãƒ‰
npm run studio:build

# ãƒ“ãƒ«ãƒ‰ã—ãŸã‚‚ã®ã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
npm run studio:preview
```

### VitePress ã®èµ·å‹•ï¼ˆæ—¢å­˜ï¼‰

```bash
npm run dev
# ã¾ãŸã¯
npm run docs:dev
```

æ—¢å­˜ã®VitePressã‚µã‚¤ãƒˆã¯å¼•ãç¶šãåŒã˜ã‚³ãƒãƒ³ãƒ‰ã§èµ·å‹•ã§ãã¾ã™ã€‚

## è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

### nuxt.config.ts

Nuxt 3ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã€‚ä»¥ä¸‹ãŒå«ã¾ã‚Œã¾ã™ï¼š
- Nuxt Contentã¨Nuxt Studioãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®æœ‰åŠ¹åŒ–
- ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆè¨­å®š
- Markdownæ©Ÿèƒ½ã®è¨­å®š
- Studioæ©Ÿèƒ½ã®æœ‰åŠ¹åŒ–

### content.config.ts

Nuxt Contentã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³è¨­å®šï¼š
- `content` ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³: ã™ã¹ã¦ã®Markdownãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ`**/*.md`ï¼‰ã‚’å«ã‚€
- `parts` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’é™¤å¤–

### .gitignore

ä»¥ä¸‹ã®Nuxté–¢é€£ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒé™¤å¤–ã•ã‚Œã¦ã„ã¾ã™ï¼š
- `.nuxt` - Nuxt ã®ãƒ“ãƒ«ãƒ‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥
- `.output` - Nuxt ã®ãƒ“ãƒ«ãƒ‰å‡ºåŠ›
- `dist` - é…å¸ƒç”¨ãƒ“ãƒ«ãƒ‰

## ç¾åœ¨ã®çŠ¶æ…‹

âœ… **å‹•ä½œã—ã¦ã„ã‚‹æ©Ÿèƒ½:**
- Nuxt Studioé–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•
- 136å€‹ã®Markdownãƒ•ã‚¡ã‚¤ãƒ«ã®æ¤œå‡º
- ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã«ã‚ˆã‚‹`src/`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸ã®ã‚¢ã‚¯ã‚»ã‚¹
- åŸºæœ¬çš„ãªNuxtã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ§‹é€ 
- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ä»˜ãã®ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸

ğŸ“ **ä»Šå¾Œå®Ÿè£…å¯èƒ½ãªæ©Ÿèƒ½:**
- Nuxt Content v3ã®ã‚¯ã‚¨ãƒªAPIã‚’ä½¿ç”¨ã—ãŸè¨˜äº‹ä¸€è¦§ã®è¡¨ç¤º
- å€‹åˆ¥è¨˜äº‹ãƒšãƒ¼ã‚¸ã®å®Œå…¨ãªè¡¨ç¤ºæ©Ÿèƒ½
- ã‚«ãƒ†ã‚´ãƒªãƒšãƒ¼ã‚¸ã®å®Ÿè£…

ç¾åœ¨ã®ãƒšãƒ¼ã‚¸ã¯åŸºæœ¬çš„ãªãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³æ§‹é€ ã‚’æä¾›ã—ã¦ãŠã‚Šã€Nuxt Content v3ã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«å¾“ã£ã¦è¨˜äº‹è¡¨ç¤ºæ©Ÿèƒ½ã‚’è¿½åŠ ã§ãã¾ã™ã€‚

## æŠ€è¡“ãƒ¡ãƒ¢

### Nuxt Content v3ã®å¤‰æ›´ç‚¹

Nuxt Content v3ã§ã¯ä»¥ä¸‹ã®å¤‰æ›´ãŒã‚ã‚Šã¾ã™ï¼š
- `queryContent` â†’ `queryCollection` ã«APIå¤‰æ›´
- ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ãƒ™ãƒ¼ã‚¹ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†
- SQLite ã‚’ä½¿ç”¨ã—ãŸã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹

### ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã«ã¤ã„ã¦

`content` â†’ `src` ã®ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã«ã‚ˆã‚Šã€æ—¢å­˜ã®VitePressã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ãã®ã¾ã¾åˆ©ç”¨ã§ãã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šï¼š
- VitePressã¯å¾“æ¥é€šã‚Š`src/`ã‚’ä½¿ç”¨
- Nuxt Contentã¯`content/`ï¼ˆå®Ÿéš›ã¯`src/`ï¼‰ã‚’ä½¿ç”¨
- ä¸¡æ–¹ã®ã‚·ã‚¹ãƒ†ãƒ ãŒåŒã˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚ç…§

## æ³¨æ„äº‹é …

1. **2ã¤ã®ç‹¬ç«‹ã—ãŸã‚·ã‚¹ãƒ†ãƒ **
   - VitePress: æ—¢å­˜ã®ã‚µã‚¤ãƒˆç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ ï¼ˆæœ¬ç•ªç’°å¢ƒç”¨ï¼‰
   - Nuxt Studio: æ–°ã—ãè¿½åŠ ã•ã‚ŒãŸMarkdownã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ï¼ˆé–‹ç™ºç’°å¢ƒç”¨ï¼‰

2. **ãƒãƒ¼ãƒˆç«¶åˆ**
   - VitePressã¨Nuxt Studioã‚’åŒæ™‚ã«èµ·å‹•ã™ã‚‹å ´åˆã€ç•°ãªã‚‹ãƒãƒ¼ãƒˆã‚’ä½¿ç”¨ã—ã¾ã™
   - Nuxt Studioã¯è‡ªå‹•çš„ã«åˆ©ç”¨å¯èƒ½ãªãƒãƒ¼ãƒˆã‚’è¦‹ã¤ã‘ã¾ã™

3. **æœ¬ç•ªç’°å¢ƒ**
   - æœ¬ç•ªç’°å¢ƒã§ã¯å¼•ãç¶šãVitePressã‚’ä½¿ç”¨ã—ã¦ãƒ“ãƒ«ãƒ‰ã—ã¾ã™
   - Nuxt Studioã¯ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒã§ã®Markdownç·¨é›†ç”¨ã§ã™

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ãƒãƒ¼ãƒˆãŒä½¿ç”¨ä¸­

Nuxt StudioãŒèµ·å‹•æ™‚ã«ãƒãƒ¼ãƒˆ3000ãŒä½¿ç”¨ä¸­ã®å ´åˆã€è‡ªå‹•çš„ã«æ¬¡ã«åˆ©ç”¨å¯èƒ½ãªãƒãƒ¼ãƒˆï¼ˆ3001ãªã©ï¼‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è¡¨ç¤ºã•ã‚Œã‚‹URLã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

### ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒè¡¨ç¤ºã•ã‚Œãªã„

Nuxt ContentãŒæ­£ã—ããƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚ãƒ­ã‚°ã«ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªï¼š

```
[@nuxt/content] Processed 2 collections and 129 files
```

### ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã®ç¢ºèª

```bash
ls -la | grep content
# è¡¨ç¤ºä¾‹: lrwxrwxrwx 1 runner runner 3 Feb 10 06:20 content -> src
```

### oxc-parserã®ãƒã‚¤ãƒ†ã‚£ãƒ–ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã‚¨ãƒ©ãƒ¼

`npm run studio:dev`ã§ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹å ´åˆ:

```
ERROR  Cannot find native binding. npm has a bug related to optional dependencies
Cannot find module '@oxc-parser/binding-linux-x64-gnu'
```

**è§£æ±ºæ–¹æ³•:**

1. package-lock.jsonã¨node_modulesã‚’å‰Šé™¤:
```bash
rm -rf package-lock.json node_modules
```

2. å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«:
```bash
npm install
```

ã“ã®ã‚¨ãƒ©ãƒ¼ã¯npmã®ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ä¾å­˜é–¢ä¿‚ã®å‡¦ç†ã«é–¢ã™ã‚‹æ—¢çŸ¥ã®å•é¡Œã§ã™ã€‚ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã¯`@oxc-parser/binding-linux-x64-gnu`ãŒæ˜ç¤ºçš„ã«å«ã¾ã‚Œã¦ã„ã‚‹ãŸã‚ã€ã‚¯ãƒªãƒ¼ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§è§£æ±ºã—ã¾ã™ã€‚

### "Results is not iterable" ã‚¨ãƒ©ãƒ¼

`queryCollection` APIã®ä½¿ç”¨ã«é–¢ã™ã‚‹ã‚¨ãƒ©ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹å ´åˆï¼š

**åŸå› :**
Nuxt Content v3ã®`queryCollection` APIã¯ã€v2ã®`queryContent`ã¨ã¯ç•°ãªã‚‹æ§‹é€ ã‚’è¿”ã—ã¾ã™ã€‚

**è§£æ±ºæ–¹æ³•:**
åŸºæœ¬çš„ãªãƒšãƒ¼ã‚¸æ§‹é€ ã¯å®Ÿè£…æ¸ˆã¿ã§ã™ã€‚è¨˜äº‹ä¸€è¦§ã‚„å€‹åˆ¥è¨˜äº‹ã®è¡¨ç¤ºæ©Ÿèƒ½ã¯ã€[Nuxt Content v3ã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://content.nuxt.com/)ã«å¾“ã£ã¦å®Ÿè£…ã§ãã¾ã™ã€‚

ç¾åœ¨ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã§ã¯ã€Nuxt StudioãŒæ­£å¸¸ã«èµ·å‹•ã—ã€ã™ã¹ã¦ã®Markdownãƒ•ã‚¡ã‚¤ãƒ«ãŒæ¤œå‡ºã•ã‚Œã¦ã„ã¾ã™ã€‚

## ä»Šå¾Œã®æ”¹å–„äºˆå®š

- [ ] Nuxt Content v3 ã‚¯ã‚¨ãƒªAPIã®å®Œå…¨ãªçµ±åˆ
- [ ] è¨˜äº‹ä¸€è¦§ãƒšãƒ¼ã‚¸ã®å®Ÿè£…
- [ ] å€‹åˆ¥è¨˜äº‹ãƒšãƒ¼ã‚¸ã®å®Œå…¨ãªè¡¨ç¤ºæ©Ÿèƒ½
- [ ] Studio UIã§ã®Markdownç·¨é›†æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆã¨æœ€é©åŒ–
- [ ] ã‚«ãƒ†ã‚´ãƒªãƒšãƒ¼ã‚¸ã®å®Ÿè£…
- [ ] æ¤œç´¢æ©Ÿèƒ½ã®è¿½åŠ 

## å‚è€ƒãƒªãƒ³ã‚¯

- [Nuxt 3 Documentation](https://nuxt.com/)
- [Nuxt Content Documentation](https://content.nuxt.com/)
- [Nuxt Studio Documentation](https://nuxt.studio/)
- [VitePress Documentation](https://vitepress.dev/)
